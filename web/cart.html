<!DOCTYPE html>
<html lang="zxx" dir="ltr">
	
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>cart</title>
    <meta name="robots" content="index, follow" />
    <meta name="description" content="Hmart-Smart Product eCommerce html Template">
    <!-- Favicon -->
    <link rel="shortcut icon" type="image/x-icon" href="assets/images/favicon.ico" />
  
    <link rel="stylesheet" href="assets/css/plugins.min.css">
    <link rel="stylesheet" href="assets/css/style.min.css">
</head>

<body>
    <div class="main-wrapper">
        <!--		All pages top area start-->
        <header>	
            <!-- Header top area start phone/email/account-->
            <div class="header-top">
                <div class="container">
                    <div class="row justify-content-between align-items-center">
                        <div class="col d-none d-lg-block">
                            <div class="top-nav">
                                <ul>
                                    <li><a><i class="fa fa-phone"></i> +012 3456 789</a></li>
                                    <li><a><i class="fa fa-envelope-o"></i> NeBula@bjtuluc.com</a></li>
                                    <li><a href="login.html"><i class="fa fa-user"></i> Logout</a></li>
                                </ul>
                            </div>
							
                        </div>
                    </div>
                </div>
            </div>
            <!-- Header top area end -->
			
            <!-- Header action area start logo/search/wishlist/cart-->
            <div class="header-bottom  d-none d-lg-block">
                <div class="container">
                    <div class="row justify-content-between align-items-center">
                       <!--							logo-->
						<div class="col-lg-3 col">
                            <div class="header-logo">
                                <a href="index.html"><img src="assets/images/logo/logo.png" alt="Site Logo" /></a>
                            </div>
                        </div>
						<!--                        search-->
                        <div class="col-lg-6 d-none d-lg-block">
                            <div class="search-element">
								<form action="#">
                                    <input type="text" placeholder="Search" />
                                    <button><i class="pe-7s-search"></i></button>
                                </form>
                            </div>
                        </div>
                        <!--						icon-->
                        <div class="col-lg-3 col">
                            <div class="header-actions">
                               
							    
								<!-- Cart Start -->
                                <a href="cart.html" class="header-action-btn header-action-btn-cart">
                                    <i class="pe-7s-shopbag"></i>
<!--                                    <span class="header-action-num">01</span>-->
                                </a>
								<!-- Cart End -->							
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Header action area end -->
			           
			<!-- header navigation area start home/about/pages/shop/contact-->
                        <div class="header-nav-area d-none d-lg-block sticky-nav">
                <div class="container">
                    <div class="header-nav">
                        <div class="main-menu position-relative">
                            <ul>
								<li><a href=" index.html">Home</a></li>
                                <li><a href=" about.html">About</a></li>
								<li><a href=" shop-3-column.html">shop</a></li>
								<li class="dropdown position-static"><a href=" about.html">My<i class="fa fa-angle-down"></i></a>
                                    <ul class="mega-menu d-block">
                                        <li class="d-flex">
                                            <ul class="d-block">
                                                <li><a href=" cart.html">Cart Page</a></li>
                                            </ul>
                                            <ul class="d-block">
                                               <li><a href=" order-tracking.html">Order Tracking</a></li>
                                            </ul>  
                                            <ul class="d-flex align-items-center p-0 border-0 flex-column justify-content-center">
                                            </ul>
                                        </li>
                                    </ul>
                                </li>								
                                <li><a href=" contact.html">Contact</a></li>

								
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <!-- header navigation area end -->
        </header>
        <!--		All pages top area end-->
			
        <!-- home//cart path start -->
        <div class="breadcrumb-area">
            <div class="container">
                <div class="row align-items-center justify-content-center">
                    <div class="col-12 text-center">
                        <h2 class="breadcrumb-title">Cart</h2>
                        <!-- breadcrumb-list start -->
                        <ul class="breadcrumb-list">
                            <li class="breadcrumb-item"><a href="index.html">Home</a></li>
                            <li class="breadcrumb-item active">Cart</li>
                        </ul>
                        <!-- breadcrumb-list end -->
                    </div>
                </div>
            </div>
        </div>
        <!-- home//cart path end -->
		
        <!-- Cart Area Start -->
        <div class="cart-main-area pt-100px pb-100px">
            <div class="container">
                <h3 class="cart-page-title">Your cart items</h3>
                <div class="row">
                    <div class="col-lg-12 col-md-12 col-sm-12 col-12">
                        <form action="#">
                            <div class="table-content table-responsive cart-table-content">
                                <table>
                                    <thead>
                                        <tr>
                                            <th>Image</th>
                                            <th>Product Name</th>
                                            <th>Until Price</th>
                                            <th>Qty</th>
<!--                                            <th>Subtotal</th>-->
                                            <th>Action</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <!--one product mode-->
                                        <tr>
                                            <td class="product-thumbnail">
                                                <a href="#"><img class="img-responsive ml-15px" src="assets/images/product-image/1.webp" alt="" /></a>
                                            </td>
                                            <td class="product-name"><a href="#">Modern Smart Phone</a></td>
                                            <td class="product-price-cart"><span class="amount">$60.00</span></td>
                                            <td class="product-quantity">
                                                <div class="cart-plus-minus">
                                                    <input class="cart-plus-minus-box" type="text" name="qtybutton" value="1" />
                                                </div>
                                            </td>
                                            <td class="product-remove">
                                                
                                                <a href="#"><i class="fa fa-times"></i></a>
                                            </td>
                                        </tr>
                                        
                                        <tr>
                                            <td class="product-thumbnail">
                                                <a href="#"><img class="img-responsive ml-15px" src="assets/images/product-image/2.webp" alt="" /></a>
                                            </td>
                                            <td class="product-name"><a href="#">Bluetooth Headphone</a></td>
                                            <td class="product-price-cart"><span class="amount">$50.00</span></td>
                                            <td class="product-quantity">
                                                <div class="cart-plus-minus">
                                                    <input class="cart-plus-minus-box" type="text" name="qtybutton" value="1" />
                                                </div>
                                            </td>
<!--                                            <td class="product-subtotal">$80.00</td>-->
                                            <td class="product-remove">
                                                 
                                                <a href="#"><i class="fa fa-times"></i></a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="product-thumbnail">
                                                <a href="#"><img class="img-responsive ml-15px" src="assets/images/product-image/3.webp" alt="" /></a>
                                            </td>
                                            <td class="product-name"><a href="#">Smart Music Box</a></td>
                                            <td class="product-price-cart"><span class="amount">$70.00</span></td>
                                            <td class="product-quantity">
                                                <div class="cart-plus-minus">
                                                    <input class="cart-plus-minus-box" type="text" name="qtybutton" value="1" />
                                                </div>
                                            </td>
<!--                                            <td class="product-subtotal">$90.00</td>-->
                                            <td class="product-remove">
                                                <a href="#"><i class="fa fa-times"></i></a>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div class="row">
                                <div class="col-lg-12">
                                    <div class="cart-shiping-update-wrapper">
                                        <div class="cart-shiping-update">
                                            <a href="shop-3-column.html">Continue Shopping</a>
                                        </div>
                                        <div class="cart-clear">
<!--                                            <button>Update Shopping Cart</button>-->
                                            <a href="checkout.html">checkout</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </form>
                        <div class="row">
                            
                          
                           
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Cart Area End -->
 
    </div>
    
    <script src=" assets/js/jQuery.mini.js"></script>
    <script src=" assets/js/vendor.min.js"></script>
    <script src=" assets/js/plugins.min.js"></script>
    <script src=" assets/js/main.min.js"></script>
    <script>
        
    $(function(){ 
//            $("#login").click(function(){

                $.ajax({
                      type: 'GET',
                      url: "http://localhost:8080/NeBula/cart",
//                      data:data, //序列化data
//                      data:{"username":username,"password":password},
                      dataType: "json",
//                      dataType: "text",
                      async: false,
//                      crossDomain: true,

                      success:function(response){
                        var cart = response;
                        var cartProductID = new Array();
                        var amount = new Array();
                        console.log("success ajax1");
                        console.log("response",response);
                        console.log("cart",cart);
                        console.log("typeof(response):",typeof(response));
                        //提取cart里面的product对象
                        for(var i=0; i<cart.length; i++){
                            console.log(cart[i]);
                        }
                        //提取product的amount
                        for(var i=0; i<cart.length; i++){
                            //cart product ID
                            console.log("cart[i].productID",cart[i].productID);
                            cartProductID[i] = cart[i].productID;
                            console.log("cartProductID[i]:",cartProductID[i]);  
                            //cart product amount
                            console.log("cart[i].amount",cart[i].amount);
                            amount[i] = cart[i].amount;
                            console.log("amount[i]:",amount[i]);  
                        }
                        
                        //获取cart内product的name price（根据productID判断）
                        $.ajax({
                                type: 'GET',
                                url: "http://localhost:8080/NeBula/product",
                                dataType: "json",
                                async: false,
                                success:function(response){
                                  var product = response;
                                  var name = new Array();
                                  var price = new Array();
                                  var productID = new Array();
          //                        test ajax
                                  console.log("success ajax2");
                                  console.log(response);
                                  console.log("typeof(response):",typeof(response));
          //                        console.log("response content:",JSON.stringify(response)); //把json转换为string
                                  console.log("data.length:",product.length);

                                  //获取、所有的里面product
                                  for(var i=0; i<product.length; i++){
                                      console.log(product[i]);
                                  }
                                  
                                  //获取product的id
                                  for(var i=0; i<product.length; i++){
//                                      console.log("product[i].id",product[i].id);
                                      productID[i] = product[i].id;
//                                      console.log("productID[i]:",productID[i]);
                                  }
                                  
                                   console.log("获取里面product的属性值:");
                                  //获取里面product的属性值
                                  for(var i=0; i<product.length; i++){
                                      //id
//                                      console.log("product[i].id",product[i].id);
//                                      productID[i] = product[i].id;
//                                      console.log("productID[i]:",productID[i]);
                                      //判断product是否在cart内（判断cartProductID和allProductID是否相同）
                                      for(var j=0; j<cartProductID.length; j++){
                                         console.log("进来了"); 
                                        if(cartProductID[j] == productID[i]){
                                        //name
                                        console.log("product[i].name:",product[i].name);
                                        name[i] = product[i].name;
                                        console.log("name[i]:",name[i]);   
                                        //price
                                        console.log("product[i].price:",product[i].price);
                                        price[i] = product[i].price;
                                        console.log("price[i]:",price[i]);
                                      };
                                      }
                                      
                                  }

                                  //将值写入html标签
//                                  for(var i=0; i<name.length; i++){
//
//                                      //product name
//                                      $(("#"+"name"+(i+1))).text(name[i]);
//                                      //price
//                                      $(("#"+"price"+(i+1))).text("$ "+price[i]);
//                                      //stock
//                                      $(("#"+"stock"+(i+1))).text(stock[i]);
//                                  }

                                  console.log("end of success ajax2");     
                                },//success

                               error:function(response){
                                  alert("fail ajax");
                                  console.log("fail ajax",response);
                                  console.log("end of fail ajax");     
                                }//error
                        });// end of ajax2



                        
                        console.log("end of success ajax1");     
                      },//ajax1 success
                      
                     error:function(response){
                        alert("fail ajax");
                        console.log("fail ajax",response);
                        console.log("end of fail ajax");     
                      }//ajax1 error
                      
                    });//end of ajax1
                 return false; //加上才能实现页面跳转 window.location.href
        });//start
    </script>
</body>

</html>